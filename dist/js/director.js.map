{"version":3,"sources":["../../js/director.js"],"names":["director","instance","dataStore","getInstance","moveSpeed","minTop","window","innerHeight","maxTop","top","Math","random","get","push","upPencil","downPencil","isGameOver","draw","pencils","x","width","length","shift","innerWidth","createPencil","forEach","value","timer","requestAnimationFrame","run","put","cancelAnimationFrame","destroy"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;;;IAEaA,Q,WAAAA,Q;;;sCACY;AACjB,gBAAI,CAACA,SAASC,QAAd,EAAwB;AACpBD,yBAASC,QAAT,GAAoB,IAAID,QAAJ,EAApB;AACH;AACD,mBAAOA,SAASC,QAAhB;AACH;;;AAED,wBAAc;AAAA;;AACV,aAAKC,SAAL,GAAiBA,qBAAUC,WAAV,EAAjB;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACH;;;;uCAEc;AACX,gBAAMC,SAASC,OAAOC,WAAP,GAAqB,CAApC;AACA,gBAAMC,SAASF,OAAOC,WAAP,GAAqB,CAApC;AACA,gBAAME,MAAMJ,SAASK,KAAKC,MAAL,MAAiBH,SAASH,MAA1B,CAArB;AACA,iBAAKH,SAAL,CAAeU,GAAf,CAAmB,SAAnB,EAA8BC,IAA9B,CAAmC,IAAIC,kBAAJ,CAAaL,GAAb,CAAnC;AACA,iBAAKP,SAAL,CAAeU,GAAf,CAAmB,SAAnB,EAA8BC,IAA9B,CAAmC,IAAIE,sBAAJ,CAAeN,GAAf,CAAnC;AACH;;;8BAEK;AAAA;;AACF,gBAAI,CAAC,KAAKO,UAAV,EAAsB;AAClB,qBAAKd,SAAL,CAAeU,GAAf,CAAmB,YAAnB,EAAiCK,IAAjC;;AAEA,oBAAMC,UAAU,KAAKhB,SAAL,CAAeU,GAAf,CAAmB,SAAnB,CAAhB;AACA,oBAAIM,QAAQ,CAAR,EAAWC,CAAX,GAAeD,QAAQ,CAAR,EAAWE,KAA1B,IAAmC,CAAnC,IAAwCF,QAAQG,MAAR,KAAmB,CAA/D,EAAkE;AAC9DH,4BAAQI,KAAR;AACAJ,4BAAQI,KAAR;AACH;;AAED,oBAAIJ,QAAQ,CAAR,EAAWC,CAAX,IAAgB,CAACb,OAAOiB,UAAP,GAAoBL,QAAQ,CAAR,EAAWE,KAAhC,IAAyC,CAAzD,IAA8DF,QAAQG,MAAR,KAAmB,CAArF,EAAwF;AACpF,yBAAKG,YAAL;AACH;;AAED,qBAAKtB,SAAL,CAAeU,GAAf,CAAmB,SAAnB,EAA8Ba,OAA9B,CAAsC,UAASC,KAAT,EAAgB;AAClDA,0BAAMT,IAAN;AACH,iBAFD;;AAIA,qBAAKf,SAAL,CAAeU,GAAf,CAAmB,MAAnB,EAA2BK,IAA3B;AACA,qBAAKf,SAAL,CAAeU,GAAf,CAAmB,OAAnB,EAA4BK,IAA5B;AACA,oBAAIU,QAAQC,sBAAsB;AAAA,2BAAM,MAAKC,GAAL,EAAN;AAAA,iBAAtB,CAAZ;AACA,qBAAK3B,SAAL,CAAe4B,GAAf,CAAmB,OAAnB,EAA4BH,KAA5B;AACH,aArBD,MAqBO;AACHI,qCAAqB,KAAK7B,SAAL,CAAeU,GAAf,CAAmB,OAAnB,CAArB;AACA,qBAAKV,SAAL,CAAe8B,OAAf;AACH;AACJ","file":"director.js","sourcesContent":["import {dataStore} from \"./base/dataStore.js\";\r\nimport {upPencil} from \"./runtime/upPencil.js\";\r\nimport {downPencil} from \"./runtime/downPencil.js\";\r\n\r\nexport class director {\r\n    static getInstance() {\r\n        if (!director.instance) {\r\n            director.instance = new director();\r\n        }\r\n        return director.instance;\r\n    }\r\n\r\n    constructor() {\r\n        this.dataStore = dataStore.getInstance();\r\n        this.moveSpeed = 2;\r\n    }\r\n\r\n    createPencil() {\r\n        const minTop = window.innerHeight / 8;\r\n        const maxTop = window.innerHeight / 2;\r\n        const top = minTop + Math.random() * (maxTop - minTop);\r\n        this.dataStore.get('pencils').push(new upPencil(top));\r\n        this.dataStore.get('pencils').push(new downPencil(top));\r\n    }\r\n\r\n    run() {\r\n        if (!this.isGameOver) {\r\n            this.dataStore.get('background').draw();\r\n\r\n            const pencils = this.dataStore.get('pencils');\r\n            if (pencils[0].x + pencils[0].width <= 0 && pencils.length === 4) {\r\n                pencils.shift();\r\n                pencils.shift();\r\n            }\r\n\r\n            if (pencils[0].x <= (window.innerWidth - pencils[0].width) / 2 && pencils.length === 2) {\r\n                this.createPencil();\r\n            }\r\n\r\n            this.dataStore.get('pencils').forEach(function(value) {\r\n                value.draw();\r\n            });\r\n\r\n            this.dataStore.get('land').draw();\r\n            this.dataStore.get('birds').draw();\r\n            let timer = requestAnimationFrame(() => this.run());\r\n            this.dataStore.put('timer', timer);\r\n        } else {\r\n            cancelAnimationFrame(this.dataStore.get('timer'));\r\n            this.dataStore.destroy();\r\n        }\r\n    }\r\n}"]}